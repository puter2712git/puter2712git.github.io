---
title: 1. Basic Information
date: 2026-01-08 21:58:00 +0900
categories: [DirectX]
tags: ["Learning", "DirectX"]
pin: true
math: true
mermaid: true
---

## Overview

**DirectX**는 애플리케이션에서 GPU를 제어하고 프로그래밍할 수 있게 돕는 저수준 그래픽 API입니다. 우리가 C로 코드를 작성하면 컴파일러가 이를 기계어로 번역하게 되는데, 이때 DirectX는 GPU가 알아들을 수 있는 instruction을 컴파일러가 생성할 수 있게 도와주는 역할을 합니다. <br>
DirectX 12에서 주된 변경점은 CPU의 부담을 줄이고 다중 스레드를 지원하기 위해 설계를 새로 진행한 것입니다. 이런 목표를 달성하기 위해 11에 비해 12는 훨씬 낮은 추상화로 이루어지게 됐습니다. 개발자가 손수 관리해야 할 사항이 늘어나고 API를 사용하기 어려워졌지만, 성능이 매우 개선된 게 그 특징입니다.

---

## COM(Component Object Model)

**COM**은 프로그래밍 언어 독립성(C, C++, C#, ...)과 하위 호환성(DirectX 9, 10, 11, ...)을 돕는 기술입니다. 이렇게 구성된 COM의 세부사항은 프로그래머들에게 드러나지 않고, 프로그래머는 그저 COM 인터페이스를 가리키는 포인터를 가지고 특정 메서드를 사용합니다.

COM 인터페이스는 C++에서 제공하는 `new` 키워드로 직접 생성하지 않고 제공하는 메서드들을 사용합니다. 또한, `delete`로 직접 삭제하지 않고 `Release()` 메서드가 존재합니다. COM 객체는 reference count 또한 존재해서, 참조 횟수가 0이 되면 자동으로 메모리에서 해제됩니다. (`std::shared_ptr`와 비슷)

---

## Texture Format

**Texture**란 일반적으로 2차원 이미지의 정보를 담고 있는 2차원 배열을 뜻합니다. 이 경우 배열의 각 원소는 이미지 픽셀 한 개의 색상을 담게 됩니다. <br>
하지만 텍스처는 이런 형식에 국한되지 않고, 더 넓은 용도로 사용하고 있습니다. *Normal Mapping*를 예시로 들면, 각 원소가 3차원 벡터를 담게 됩니다. 이처럼 텍스처는 단순한 색상 정보만 담지 않고 여러 format의 자료 형식을 담을 수 있는데, 이 format은 `enum` 타입 `DXGI_FORMAT`을 사용하여 명시하게 됩니다.

Format 중에 `typeless` 텍스처도 존재합니다. 이런 텍스처는 메모리만 확보해 두고 구체적인 format은 나중에 알려주는 방식을 택합니다.

---

## Swap Chain and Buffering

화면에 애니메이션이 재생될 때, 이 애니메이션이 깜빡거리는 현상을 막기 위해 다음과 같은 방법을 사용합니다.

먼저 애니메이션 하나의 프레임을 그릴 수 있는 텍스처를 두 개 준비합니다. 한 텍스처는 화면에 보여지고 다른 텍스처는 화면에 보이지 않습니다. <br>
애니메이션 하나의 프레임을 그린 텍스처가 화면에 보여질 때 다음 프레임을 미리 다른 텍스처에 그립니다. 다른 텍스처가 준비되면, 두 텍스처를 서로 바꿔서 이제 다음의 프레임이 화면에 나타나게 됩니다. <br>
간단히 말하면, 다음에 그려지는 화면을 뒤에서 미리 준비해놓고 교체만 하는 방식이라고 말할 수 있습니다.

이런 기법을 **double buffering**(이중 버퍼링)이라고 합니다. **Front buffer**가 화면에 렌더링되고 있을 때, **back buffer**는 뒤에서 다음 프레임을 준비하게 됩니다. 이후 back buffer가 준비되면 front buffer가 뒤로 가고 back buffer가 렌더링되게 됩니다. 이를 Direct3D에서는 **presenting**된다고 말합니다.

> 두 버퍼의 데이터를 교환하는 것이 아닌, 두 포인터만을 swap하는 것으로 presenting을 진행하게 됩니다.

각 버퍼는 하나의 **swap chain**을 형성합니다. DirectX에서는 `IDXGISwapChain` 인터페이스로 이를 제공하는데, 이 인터페이스는 전면 버퍼, 후면 버퍼의 텍스처를 담고 버퍼 크기 변경이나 presenting을 위한 메서드를 제공합니다. 이런 방식을 **double buffering**이라고 합니다. (**triple buffering**도 존재하지만, 일반적으로 버퍼 두 개만으로 충분)

---

## Depth Buffer

